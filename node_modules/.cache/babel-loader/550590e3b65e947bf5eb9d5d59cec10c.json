{"remainingRequest":"/home/sslye/Workspace/DAAAAR/tourist-Unesco/daar3_cv/node_modules/babel-loader/lib/index.js!/home/sslye/Workspace/DAAAAR/tourist-Unesco/daar3_cv/node_modules/eslint-loader/index.js??ref--13-0!/home/sslye/Workspace/DAAAAR/tourist-Unesco/daar3_cv/src/fake_service.js","dependencies":[{"path":"/home/sslye/Workspace/DAAAAR/tourist-Unesco/daar3_cv/src/fake_service.js","mtime":1607333878536},{"path":"/home/sslye/Workspace/DAAAAR/tourist-Unesco/daar3_cv/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sslye/Workspace/DAAAAR/tourist-Unesco/daar3_cv/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/sslye/Workspace/DAAAAR/tourist-Unesco/daar3_cv/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKCmZ1bmN0aW9uIHVwbG9hZChmb3JtRGF0YSkgewogIHZhciBwaG90b3MgPSBmb3JtRGF0YS5nZXRBbGwoJ3Bob3RvcycpOwogIHZhciBwcm9taXNlcyA9IHBob3Rvcy5tYXAoZnVuY3Rpb24gKHgpIHsKICAgIHJldHVybiBnZXRJbWFnZSh4KS50aGVuKGZ1bmN0aW9uIChpbWcpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogaW1nLAogICAgICAgIG9yaWdpbmFsTmFtZTogeC5uYW1lLAogICAgICAgIGZpbGVOYW1lOiB4Lm5hbWUsCiAgICAgICAgdXJsOiBpbWcKICAgICAgfTsKICAgIH0pOwogIH0pOwogIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7Cn0KCmZ1bmN0aW9uIGdldEltYWdlKGZpbGUpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgIHZhciBmUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKCiAgICBmUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgaW1nLnNyYyA9IGZSZWFkZXIucmVzdWx0OwogICAgICByZXNvbHZlKGdldEJhc2U2NEltYWdlKGltZykpOwogICAgfTsKCiAgICBmUmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CiAgfSk7Cn0KCmZ1bmN0aW9uIGdldEJhc2U2NEltYWdlKGltZykgewogIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICBjYW52YXMud2lkdGggPSBpbWcud2lkdGg7CiAgY2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQ7CiAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTsKICB2YXIgZGF0YVVSTCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpOwogIHJldHVybiBkYXRhVVJMOwp9CgpleHBvcnQgeyB1cGxvYWQgfTs="},{"version":3,"sources":["/home/sslye/Workspace/DAAAAR/tourist-Unesco/daar3_cv/src/fake_service.js"],"names":["upload","formData","photos","getAll","promises","map","x","getImage","then","img","id","originalName","name","fileName","url","Promise","all","file","resolve","fReader","FileReader","document","createElement","onload","src","result","getBase64Image","readAsDataURL","canvas","width","height","ctx","getContext","drawImage","dataURL","toDataURL"],"mappings":";;;;;;AAAA,SAASA,MAAT,CAAgBC,QAAhB,EAA0B;AACtB,MAAMC,MAAM,GAAGD,QAAQ,CAACE,MAAT,CAAgB,QAAhB,CAAf;AACA,MAAMC,QAAQ,GAAGF,MAAM,CAACG,GAAP,CAAW,UAACC,CAAD;AAAA,WAAOC,QAAQ,CAACD,CAAD,CAAR,CAC9BE,IAD8B,CACzB,UAAAC,GAAG;AAAA,aAAK;AACVC,QAAAA,EAAE,EAAED,GADM;AAEVE,QAAAA,YAAY,EAAEL,CAAC,CAACM,IAFN;AAGVC,QAAAA,QAAQ,EAAEP,CAAC,CAACM,IAHF;AAIVE,QAAAA,GAAG,EAAEL;AAJK,OAAL;AAAA,KADsB,CAAP;AAAA,GAAX,CAAjB;AAOA,SAAOM,OAAO,CAACC,GAAR,CAAYZ,QAAZ,CAAP;AACH;;AAED,SAASG,QAAT,CAAkBU,IAAlB,EAAwB;AACpB,SAAO,IAAIF,OAAJ,CAAY,UAACG,OAAD,EAAa;AAC5B,QAAMC,OAAO,GAAG,IAAIC,UAAJ,EAAhB;AACA,QAAMX,GAAG,GAAGY,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAZ;;AAEAH,IAAAA,OAAO,CAACI,MAAR,GAAiB,YAAM;AACnBd,MAAAA,GAAG,CAACe,GAAJ,GAAUL,OAAO,CAACM,MAAlB;AACAP,MAAAA,OAAO,CAACQ,cAAc,CAACjB,GAAD,CAAf,CAAP;AACH,KAHD;;AAKAU,IAAAA,OAAO,CAACQ,aAAR,CAAsBV,IAAtB;AACH,GAVM,CAAP;AAWH;;AAED,SAASS,cAAT,CAAwBjB,GAAxB,EAA6B;AACzB,MAAMmB,MAAM,GAAGP,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACAM,EAAAA,MAAM,CAACC,KAAP,GAAepB,GAAG,CAACoB,KAAnB;AACAD,EAAAA,MAAM,CAACE,MAAP,GAAgBrB,GAAG,CAACqB,MAApB;AAEA,MAAMC,GAAG,GAAGH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAZ;AACAD,EAAAA,GAAG,CAACE,SAAJ,CAAcxB,GAAd,EAAmB,CAAnB,EAAsB,CAAtB;AAEA,MAAMyB,OAAO,GAAGN,MAAM,CAACO,SAAP,CAAiB,WAAjB,CAAhB;AAEA,SAAOD,OAAP;AACH;;AAED,SAASlC,MAAT","sourcesContent":["function upload(formData) {\n    const photos = formData.getAll('photos');\n    const promises = photos.map((x) => getImage(x)\n        .then(img => ({\n            id: img,\n            originalName: x.name,\n            fileName: x.name,\n            url: img\n        })));\n    return Promise.all(promises);\n}\n\nfunction getImage(file) {\n    return new Promise((resolve) => {\n        const fReader = new FileReader();\n        const img = document.createElement('img');\n\n        fReader.onload = () => {\n            img.src = fReader.result;\n            resolve(getBase64Image(img));\n        }\n\n        fReader.readAsDataURL(file);\n    })\n}\n\nfunction getBase64Image(img) {\n    const canvas = document.createElement('canvas');\n    canvas.width = img.width;\n    canvas.height = img.height;\n\n    const ctx = canvas.getContext('2d');\n    ctx.drawImage(img, 0, 0);\n\n    const dataURL = canvas.toDataURL('image/png');\n\n    return dataURL;\n}\n\nexport { upload }"]}]}